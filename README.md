## - Modular SRAM-based Indirectly-indexed 2D -##
## Binary Content Addressable Memory II2DCAM ##
---
## Ameer  M. S.  Abdelhadi and Guy  G. F.  Lemieux ##
## The University of British Columbia (UBC)  2014 ##
## { ameer.abdelhadi; guy.lemieux } @ gmail.com ##
---

A fully parameterized and generic Verilog implementation of the suggested modular SRAM-based indirectly-indexed 2D hierarchical-search BCAM (II2DCAM),together with other approaches are provided as open source hardware. A run-in-batch flow manager to simulate and synthesize various designs with various parameters in batch using Altera's ModelSim and Quartus is also provided.

**LICENSE:** BSD 3-Clause ("BSD New" or "BSD Simplified") license.

Please refer to the full paper for more information:
**A. M.S. Abdelhadi and G. G.F. Lemieux, "Modular SRAM-based Binary Content-Addressable Memories," he 23rd IEEE International Symposium on Field-Programmable Custom Computing Machines (FCCM'2015), May 2015.**
http://www.ece.ubc.ca/~lemieux/publications/abdelhadi-fccm2015.pdf


---


## CAD Tools Requirements ##
This project has been tested intensively using Altera's Design Suite version 14.0 Specifically:
  1. Quartus II version 14.0 has been used to synthesize the Verilog implementation
  2. ModelSim Altera Edition version 10.0d (modelsim\_ase) has been used to simulate the Verilog implementation.

Furthermore, the run-in-batch synthesis and simulation flow managers have been implemented using C-Shell, hence a /bin/csh should be available in the m


---


## Files and directories in this package ##

  * **README:** This file!
  * **LICENSE:** BSD 3-Clause ("BSD New" or "BSD Simplified") license
  * **fccm2015-paper.pdf:** The 23rd IEEE International Symposium on Field-Programmable Custom Computing Machines (FCCM'2014) paper
  * **fccm2015-slides.pdf:** The 23rd IEEE International Symposium on Field-Programmable Custom Computing Machines (FCCM'2014) slides
  * **altera.12.0.ubc.csh:** C-shell script: Setup environment variables and Altera 12.0 CAD flow from The University of British Columbia (UBC)
  * **altera.13.1.ubc.csh:** C-shell script: Setup environment variables and Altera 13.1 CAD flow from The University of British Columbia (UBC)
  * **altera.14.0.ubc.csh:** C-shell script: Setup environment variables and Altera 14.0 CAD flow from The University of British Columbia (UBC)
  * **sim:** C-shell script: A run-in-batch simulation flow manager
  * **syn:** C-shell script: A run-in-batch synthesis  flow manager
  * **mux:** C-shell script: Wide pipelined multiplexer generator
  * **pe:** C-shell script: Priority-encoder recursive generator
  * **reduction:** C-shell script: Wide pipelined reduction function generator
  * **ii2dcam.qpf:** Quartus II project file
  * **ii2dcam.qsf:** Quartus II settings file
  * **ii2dcam.sdc:** Synopsys design constraints file; Design constraints and timing assignments
  * **config.vh:** Verilog: Generated by 'syn', contains design parameters
  * **utils.vh:** Verilog: Design utilities (pre-compile macros)
  * **bcam_bhv.v:** Behavioral description of binary CAM
  * **camctl.v:** BCAM Controller
  * **dpmlab.v:** Altera's MLAB dual-port RAM
  * **idxram.v:** indices RAM
  * **ii2dcam9b.v:** An indirectly-indexed 2D BCAM (II2DCAM) stage of 9-bits pattern
  * **ii2dcam_tb.v:** indirectly-indexed 2D BCAM (II2DCAM) Testbench
  * **ii2dcam.v:** II2DCAM top hierarchy
  * **iitram9b.v:** Indirectly-indexed transposed-RAM of 9-bits pattern
  * **iitram9bx1k.v:** Indirectly-indexed transposed-RAM of 9-bits pattern / 1K addresses
  * **mwm20k.v:** Altera's M20K mixed width RAM
  * **pe_bhv.v:** behavioural description of priority enconder
  * **setram.v:** Sets RAM
  * **vacram.v:** Vacancy RAM
  * **sim.res:** A list of simulation results, each run in a separate line, including all architectures.
  * **syn.res:** A list of synthesis results, each run in a separate line, including: frequency, resources usage, and runtime.
  * **log/:** A directory containing Altera's logs and reports.


---


## 2D BCAM module instantiation ##
All *.v & *.vh files in this package should be copied into your work directory. Copy the following instantiation into your Verilog design, change parameters and connectivity to fit your design.

```
  // instantiate a II-2D-BCAM
  ii2dcam #(
    .CDEP (CDEP), // depth (k-entries, power of 2)
    .PWID (PWID), // pattern width (9-bits multiply)
    .PIPE (PIPE), // pipelined?
    .REGI (REGI), // register inputs
    .REGO (REGO)  // register outputs
  ) ii2dcam_inst (
    .clk  (clk  ), // clock               / input
    .rst  (rst  ), // global reset        / input
    .wEnb (wEnb ), // write enable        / input
    .wAddr(wAddr), // write address       / input  [log2(CDEP)+9:0]
    .mPatt(mPatt), // match pattern       / input  [PWID*9-1    :0]
    .wPatt(wPatt), // write pattern       / input  [PWID*9-1    :0]
    .match(match), // match (valid mAddr) / output
    .mAddr(mAddr)  // match address       / output [log2(CDEP)+9:0]
);
```


---


## `sim`: A Run-in-batch Simulation Flow Manager ##

### USAGE: ###

    `./sim <Pattern width List> <CAM depth list> <#Cycles> <Verbose?>`

  * Use comma delimited lists; no space; can be surrounded by brackets (), [], {}, <>
  * CAM depth (k-lines), pattern width (9-bits) & #cycles are positive integers
  * Verbose? (Binary; 0/1)

### EXAMPLES: ###

  * `./sim 1 8 1000000 1`
    * Simulate 1M cycles of a 8K lines CAM, 9 bits pattern width ,verbosed
  * `./sim 4,8 2,4 1000000 0`
    * Simulate 1M cycles of CAMs with 2k or 4k lines, 36, 73, not verbosed

The following files and directories will be created after simulation :
  * sim.res : A list of simulation results, each run in a separate line, including all design styles


---


## `syn`: A Run-in-batch Synthesis Flow Manager ##

### USAGE: ###

    `./syn <Pattern width list> <CAM depth list> <Pipelined? list>`

  * Use comma delimited lists; no space; can be surrounded by brackets (), [], {}, <>
  * CAM depth (k-lines) and pattern width (9-bits) are positive integers
  * Pipelined? (Binary; 0/1)

### EXAMPLES: ###

  * `./syn 14 8`
    * Synthesis an unpipelined BCAM with 8 K-lines, 126 bits pattern width
  * `./syn 4,7 2,4 1`
    * Synthesis a pipelined BCAM with 2, 4 k-lines, 36, 63 bit pattern

The following files and directories will be created after compilation:
  * syn.res : A list of results, each run in a separate line, including: frequency, resources usage, and runtime
  * log/    : Altera's logs and reports
